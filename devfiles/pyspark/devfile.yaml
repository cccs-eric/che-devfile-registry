---
apiVersion: 1.0.0
metadata:
  generateName: pyspark-
projects:
  - name: python-hello-world
    source:
      type: git
      location: 'https://github.com/che-samples/python-hello-world.git'
components:
  - id: ms-python/python/latest
    memoryLimit: 512Mi
    type: chePlugin
  - type: dockerimage
    alias: python
    image: 'cranalyticalplatform.azurecr.io/cccs/che-pyspark-3.8:3.0.0'
    memoryLimit: 512Mi
    mountSources: true
commands:
  - name: run
    actions:
      - type: exec
        component: python
        command: '/usr/local/lib/python3.8/site-packages/pyspark/bin/spark-submit -v --conf spark.driver.host=${HOSTNAME} --conf spark.authenticate.enableSaslEncryption=true --conf spark.authenticate=true --conf spark.authenticate.secret="${SPARK_RPC_AUTHENTICATION_SECRET}" --conf spark.ui.reverseProxy=true hello-world.py'
        workdir: '${CHE_PROJECTS_ROOT}/python-hello-world'

